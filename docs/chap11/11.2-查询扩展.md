## 查询扩展

查询扩展是另一种提高召回率的方法
- 我们使用 “全局查询扩展” 来指那些 “查询重构(query reformulation)的全局方法”，大部分情况下不做区分。
- 查询扩展：最初含义是对原始查询增加term
- 查询重构：对初始查询进行修改，以便能更接近用户的查询需求

用户有明确的查询目的，但是用户不知道如何构造好的查询，因此，初始查询往往不能很好地表达其查询需求

- 用户没有经验
- 查询的表达方式很多
- 对检索系统不熟悉
- 对目标文档分布不熟悉

用户不知道要具体查询什么，需要查看结果以后才逐渐细化

> 相关反馈是给返回的结果文档进行相关性标注，查询扩展是对原始的查询进行修改。
> 相关反馈的结果常常用于查询扩展，查询扩展也可以不依赖于相关反馈

- 基于(用户)相关反馈的查询扩展：用户参与反馈过程(显式/隐式)，系统利用用户反馈结果对原始查询进行调整。
- 基于自动局部分析的查询扩展：利用上次检索结果的前N个结果文档进行自动分析
- 基于自动全局分析的查询扩展：利用全部的文档集合进行分析。
- 基于(外部)资源的方法：基于已有的词典(wordnet、Hownet、同义词词林)、网络资源(wiki、social tag)、基于其他搜索引擎(如google)的结果、搜索日志(search log)等等



## **用户反馈**

- 向量空间模型中基于(用户)相关反馈的查询扩展（前面介绍的Rocchio算法）
- 概率模型中基于(用户)相关反馈的查询扩展
- 语言模型中基于(用户)相关反馈的查询扩展

![1735653260163](C:\Users\马世拓\AppData\Roaming\Typora\typora-user-images\1735653260163.png)

优点：
- 能够获得用户的准确标注
- 将整个搜索过程分成几个小步骤，每个步骤都很容易把握
- 提供了一个受控过程来强调或者弱化某些term
缺点：
- 主要的缺点是需要人工的参与，加重用户的负担。
- IR中集中研究不需要用户相关反馈而自动进行QE的方法。

局部分析(local analysis)：利用对初始查询检索得到的结果，特别是排名靠前的那些文档(称为局部文档)进行分析后来改善查询，需要基于上次检索的结果(本质是一种伪相关反馈)

全局分析(global analysis)：利用文档集合中的全部文档进行分析，不需要基于初始检索的结果。


## **自动局部分析**

利用局部文档对term进行聚类，即将相关的term聚在一起，聚类的结果称为一个个簇(cluster)，于是利用簇中的相关term对查询q进行扩展。

关键：定义term之间的相似度，不同的相似度定义得到不同的簇。

一种思路：关联簇Association clusters(还有其他计算term之间相似度方法)

在查询扩展中，**关联簇**（Association Clusters）是一种用于改进查询效果的技术。其基本思想是通过识别与原始查询词项相关的其他词项，将这些词项聚集成簇，然后利用这些簇中的词项对原始查询进行扩展。

### 关联簇的基本概念
- **定义**：关联簇是通过分析词项之间的关联关系，将相关的词项聚集成簇。这些词项在语义上通常具有相似性或相关性。
- **生成过程**：
  - **词项相似度计算**：首先计算查询词项与其他词项之间的相似度。相似度可以通过统计方法（如共现频率）或语义分析方法（如词向量相似度）来计算.
  - **聚类**：根据相似度将词项聚集成簇。常用的聚类方法包括层次聚类、K-means聚类等.
  - **选择扩展词项**：从每个簇中选择一些词项作为扩展词项，加入到原始查询中，以增强查询的语义覆盖范围.

### 关联簇在查询扩展中的应用
- **提高查询覆盖率**：通过引入与原始查询相关的词项，关联簇可以扩展查询的语义范围，从而提高检索结果的覆盖率，减少漏检.
- **增强查询相关性**：扩展词项的加入可以使检索结果更贴近用户的实际需求，提高检索结果的相关性，提升用户体验.
- **适应不同查询需求**：对于不同的查询需求，可以通过调整关联簇的生成和扩展策略，灵活地进行查询扩展，满足多样化的检索需求.

总之，关联簇在查询扩展中发挥着重要作用，通过合理利用词项之间的关联关系，可以有效地提升信息检索系统的性能和用户体验.

簇中的不同term互称为邻居(neighborhood)，或者称为搜索同义项，有别于语法意义上的同义词。

查询扩展方式：对于q中的每个term，都选择和该term最近的多个term进行扩充。

有实验表明：度量簇（一种考虑了位置信息的term聚类）效果好于关联簇（没有考虑位置信息），说明位置信息是有用的。

局部聚类的缺点：计算的是q中每个term和所有term之间的相似度，而不是计算q和所有term的相似度。
应该将q看成一个整体！

LCA的思想：在局部文档中计算出和查询q最相近的term进行扩展。

LCA是UMass的Jinxi Xu于1996年提出的。本质上说LCA是融合了局部分析和全局分析的方法。

- 第一步，将所有文档都进行分段(比如300字节一段)，并将每个段落看成检索对象（local context），用原始查询q检索，返回和q最相似的n个段落(passage)
- 第二步，计算这n个段落中的每个概念c(通常就是term)和q的相似度sim(q,c)
- 第三步，选择sim值最高的m个概念加入到原始查询中。其中加入的概念的权重为1-0.9*i/m，i为其在m个概念中的排序序号。原始查询的term的权重设置为一个较大的值，比如2。

![1735653366395](C:\Users\马世拓\AppData\Roaming\Typora\typora-user-images\1735653366395.png)



## **全局分析**

全局分析是利用全部文档信息计算term之间的相似度。这种相似度计算不依赖于q，因此可以事先算好(比如生成一部全局term相似度矩阵)。在此基础上，计算term和查询q之间的相似度。

传统全局分析利用所有文档集合来计算q中每个term和所有term之间的相似度。直到1990年初，全局分析都被认为是非常失败的一种方法。

现代全局分析利用所有文档集合来计算查询q和所有term之间的相似度。1990年以后，现代全局分析代替了传统全局分析，并表现出良好的效果。

设N 为所有文档数目，t为整个文档集中的term数目，fi,j为term ki在文档dj中的频度,tj为文档dj中的不同term数目，则可以定义所谓文档dj的逆term频率 itfj （可以和逆文档频率idf 进行类比）



![1735653405904](C:\Users\马世拓\AppData\Roaming\Typora\typora-user-images\1735653405904.png)

> idf是为了计算文档的向量表示，向量空间是词集合，idf衡量了每个词的语义区分度
> itf是为了计算词的向量表示，向量空间是文档集合，itf衡量了每篇文档的语义区分度



在信息检索和自然语言处理中，计算词项（term）之间的相似度是理解文本语义和改进检索结果的重要任务。以下是几种常见的词项相似度计算方法：

### 1. 基于统计的方法
- **TF-IDF**：
  - **定义**：TF-IDF（Term Frequency-Inverse Document Frequency）是一种统计方法，用于评估一个词在文档集合中的重要性。
  - **计算公式**：
    \[
    \text{TF-IDF}(t, d) = \text{TF}(t, d) \times \text{IDF}(t)
    \]
    其中，\(\text{TF}(t, d)\) 是词项 \(t\) 在文档 \(d\) 中的频率，\(\text{IDF}(t) = \log\left(\frac{N}{n_t}\right)\)，\(N\) 是文档总数，\(n_t\) 是包含词项 \(t\) 的文档数。
  - **应用**：通过计算两个词项在文档中的TF-IDF值，可以评估它们在语义上的相似性。

### 2. 基于词向量的方法
- **Word2Vec**：
  - **定义**：Word2Vec是一种基于神经网络的词向量表示方法，能够捕捉词项的上下文信息和语义关系。
  - **计算方法**：通过训练得到每个词项的向量表示，然后使用余弦相似度等度量方法计算两个词项向量之间的相似度。
  - **优点**：能够较好地捕捉词项的语义相似性，适用于各种自然语言处理任务.

### 3. 基于知识的方法
- **WordNet**：
  - **定义**：WordNet是一个英语词汇数据库，包含词项的同义词集（synsets）和词项之间的语义关系（如上下位关系）.
  - **计算方法**：通过计算两个词项在WordNet中的最短路径长度或信息内容来评估它们的相似度。
  - **优点**：利用丰富的语义知识，能够提供较为准确的词项相似度评估，但依赖于WordNet的覆盖范围和质量.

### 4. 基于上下文的方法
- **LDA主题模型**：
  - **定义**：LDA（Latent Dirichlet Allocation）是一种主题模型，用于发现文档集合中的潜在主题.
  - **计算方法**：通过LDA模型将文档表示为主题分布，然后计算两个词项在主题分布中的相似度。
  - **应用**：适用于大规模文本集的词项相似度计算，能够揭示词项在不同主题下的语义关系.

这些方法各有优缺点，选择合适的词项相似度计算方法需要根据具体的应用场景和数据特点来决定。

**外部资源**

### 基于同近义词资源的查询扩展

#### 定义与目的
基于同近义词资源的查询扩展是一种通过引入与原始查询词项具有相似或相近意义的词项来增强查询语义覆盖范围的技术。其主要目的是提高信息检索系统的召回率和相关性，帮助用户更全面地获取所需信息。

#### 实现方法
- **同义词词典**：
  - **资源选择**：常用的同义词资源包括哈工大同义词词林扩展版、中文同义词数据集等。这些资源通常以词典的形式存在，包含了大量经过人工或自动方法整理的同义词对或词组.
  - **扩展过程**：
    - **词项匹配**：将用户输入的查询词与同义词词典中的词项进行匹配，找出与之对应的同义词或近义词.
    - **查询构建**：将匹配到的同义词或近义词添加到原始查询中，形成扩展后的查询。例如，对于查询“汽车”，可以扩展为“汽车 汽车车 汽车车辆”等。
    - **权重分配**：在扩展查询中，可以为原始查询词和扩展词项分配不同的权重，以反映它们在查询中的重要性。通常，原始查询词的权重较高，而扩展词项的权重较低。

- **自动构造同义词词典**：
  - **基于共现统计**：通过分析大规模语料库中的词项共现关系，自动挖掘出具有相似语义的词项对。例如，使用词频共现矩阵或基于词向量的相似度计算方法。
  - **基于语义模型**：利用预训练的语义模型（如Word2Vec、BERT等），计算词项之间的语义相似度，从而识别出同义词或近义词。

#### 应用场景与优势
- **信息检索系统**：在搜索引擎、图书馆检索系统等信息检索场景中，基于同近义词资源的查询扩展能够显著提高检索结果的覆盖率和相关性，帮助用户找到更多与查询意图相关的文档。
- **自然语言处理任务**：在文本分类、情感分析、自动问答等自然语言处理任务中，通过扩展查询词项的语义范围，可以更好地理解文本内容和用户需求，提高任务的准确性和效率。
- **多语言信息检索**：在跨语言信息检索中，利用多语种的同义词资源进行查询扩展，可以实现不同语言之间的语义匹配和信息共享。

### 注意事项与挑战
- **扩展词项的选择**：在扩展查询时，需要谨慎选择扩展词项，避免引入与用户意图无关的噪声词项，导致查询漂移。
- **资源质量与覆盖度**：同近义词资源的质量和覆盖度直接影响查询扩展的效果。高质量的同义词词典可以提供更准确的扩展词项，而覆盖度不足可能导致某些查询词项无法找到合适的扩展。
- **上下文依赖性**：词项的同义关系可能受到上下文的影响，因此在某些情况下，基于同近义词资源的查询扩展可能无法准确捕捉用户的真实意图。

![1735653591055](C:\Users\马世拓\AppData\Roaming\Typora\typora-user-images\1735653591055.png)





